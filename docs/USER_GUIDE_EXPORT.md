# 导出功能使用指南

## 概述

团队协作知识库支持将笔记导出为多种格式，包括 Markdown、PDF 和 HTML。本指南将帮助您选择合适的导出格式并充分利用导出功能。

## 支持的导出格式

### Markdown (.md)

**适用场景**：
- 需要在其他 Markdown 编辑器中继续编辑
- 备份笔记内容
- 版本控制（Git）
- 技术文档

**特点**：
- 纯文本格式，文件小
- 保留所有格式标记
- 图片使用公开 URL 引用
- 跨平台兼容性好

### PDF (.pdf)

**适用场景**：
- 打印文档
- 正式分享
- 归档保存
- 不希望被修改的内容

**特点**：
- 固定布局，所见即所得
- 嵌入图片，无需网络
- 支持分页和页码
- 通用阅读器支持

### HTML (.html)

**适用场景**：
- 离线浏览
- 网页发布
- 邮件附件
- 自定义样式

**特点**：
- 单文件包含所有内容
- 图片 Base64 编码嵌入
- 内联 CSS 样式
- 浏览器直接打开

## 导出操作

### 基本导出流程

1. **打开笔记**：
   - 进入要导出的笔记页面
   - 确保笔记内容已保存

2. **打开导出对话框**：
   - 点击右上角的"导出"按钮
   - 或使用快捷键 `Ctrl/Cmd + E`

3. **选择格式**：
   - 点击 Markdown、PDF 或 HTML 标签
   - 查看格式说明和预览

4. **配置选项**：
   - 根据需要调整导出选项
   - 查看文件大小估算

5. **开始导出**：
   - 点击"导出"按钮
   - 等待生成完成
   - 文件自动下载到设备

### 导出选项

#### Markdown 选项

- **包含元数据**：
  - ✓ 在文件开头添加标题、作者、日期
  - ✗ 仅导出正文内容

- **图片处理**：
  - 使用公开 URL（默认）
  - 下载图片到本地文件夹
  - 转换为 Base64 编码

- **代码块语法**：
  - GitHub Flavored Markdown（默认）
  - 标准 Markdown
  - CommonMark

#### PDF 选项

- **页面设置**：
  - 纸张大小：A4、Letter、A3
  - 方向：纵向、横向
  - 边距：正常、窄、宽

- **页眉页脚**：
  - ✓ 显示笔记标题在页眉
  - ✓ 显示页码在页脚
  - ✓ 显示导出日期

- **图片质量**：
  - 高质量（文件较大）
  - 标准质量（推荐）
  - 压缩质量（文件较小）

#### HTML 选项

- **样式**：
  - 使用应用主题
  - 使用打印样式
  - 自定义 CSS

- **图片嵌入**：
  - ✓ Base64 编码嵌入（默认）
  - ✗ 使用外部 URL

- **包含内容**：
  - ✓ 目录（TOC）
  - ✓ 返回顶部按钮
  - ✓ 打印样式表

## 格式对比

### 功能对比表

| 功能 | Markdown | PDF | HTML |
|------|----------|-----|------|
| 文件大小 | 小 | 中 | 大 |
| 可编辑性 | ✓ | ✗ | ✓ |
| 格式保留 | 部分 | 完整 | 完整 |
| 图片嵌入 | ✗ | ✓ | ✓ |
| 跨平台 | ✓ | ✓ | ✓ |
| 打印友好 | ✗ | ✓ | ✓ |
| 版本控制 | ✓ | ✗ | ✗ |
| 离线查看 | ✓ | ✓ | ✓ |

### 格式选择建议

**选择 Markdown 如果**：
- 需要继续编辑内容
- 使用 Git 进行版本控制
- 需要最小的文件大小
- 在技术团队中分享

**选择 PDF 如果**：
- 需要打印文档
- 需要固定布局
- 正式场合分享
- 不希望被修改

**选择 HTML 如果**：
- 需要离线浏览
- 需要自定义样式
- 通过邮件分享
- 发布到网站

## 批量导出

### 导出多个笔记

1. **选择笔记**：
   - 在笔记列表中勾选要导出的笔记
   - 或使用 `Ctrl/Cmd + A` 全选

2. **批量导出**：
   - 点击"批量操作" → "导出"
   - 选择导出格式
   - 配置统一选项

3. **下载文件**：
   - 系统会生成 ZIP 压缩包
   - 包含所有选中笔记的导出文件
   - 自动下载到设备

### 导出文件夹

1. **选择文件夹**：
   - 在文件夹树中右键点击文件夹
   - 选择"导出文件夹"

2. **包含内容**：
   - ✓ 包含子文件夹
   - ✓ 包含所有笔记
   - ✓ 保留文件夹结构

3. **导出格式**：
   - 选择统一格式
   - 或为每个笔记选择不同格式

## 高级功能

### 自定义模板

#### Markdown 模板

创建自定义 Markdown 模板：

```markdown
---
title: {{title}}
author: {{author}}
date: {{date}}
tags: {{tags}}
---

# {{title}}

{{content}}

---
导出时间：{{exportDate}}
```

#### HTML 模板

创建自定义 HTML 模板：

```html
<!DOCTYPE html>
<html>
<head>
  <title>{{title}}</title>
  <style>
    /* 自定义样式 */
  </style>
</head>
<body>
  <h1>{{title}}</h1>
  <div class="content">
    {{content}}
  </div>
</body>
</html>
```

### 自动化导出

#### 定时导出

设置自动导出任务：

1. 进入设置 → 导出
2. 启用"自动导出"
3. 配置：
   - 导出频率：每天、每周、每月
   - 导出格式：Markdown、PDF、HTML
   - 导出范围：所有笔记、特定文件夹
   - 保存位置：本地、云存储

#### Webhook 触发导出

通过 Webhook 自动导出：

```json
{
  "event": "note.updated",
  "action": "export",
  "format": "markdown",
  "destination": "https://your-server.com/backup"
}
```

### 导出 API

使用 API 程序化导出：

```javascript
// 导出单个笔记
const response = await fetch('/api/notes/{id}/export', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer YOUR_TOKEN'
  },
  body: JSON.stringify({
    format: 'markdown',
    options: {
      includeMetadata: true,
      imageHandling: 'url'
    }
  })
});

const blob = await response.blob();
```

## 格式转换

### Markdown 转换规则

| 元素 | Markdown 语法 |
|------|---------------|
| 一级标题 | `# 标题` |
| 二级标题 | `## 标题` |
| 加粗 | `**文本**` |
| 斜体 | `*文本*` |
| 链接 | `[文本](URL)` |
| 图片 | `![描述](URL)` |
| 代码块 | ` ```语言\n代码\n``` ` |
| 无序列表 | `- 项目` |
| 有序列表 | `1. 项目` |
| 引用 | `> 引用文本` |

### PDF 样式

PDF 导出使用以下样式：

- **字体**：
  - 正文：思源黑体 12pt
  - 标题：思源黑体 Bold 18-24pt
  - 代码：Consolas 10pt

- **颜色**：
  - 正文：#333333
  - 标题：#000000
  - 链接：#0066cc
  - 代码背景：#f5f5f5

- **间距**：
  - 行距：1.5
  - 段落间距：12pt
  - 标题间距：24pt

### HTML 结构

HTML 导出生成以下结构：

```html
<article class="note">
  <header>
    <h1 class="note-title">标题</h1>
    <div class="note-meta">
      <span class="author">作者</span>
      <span class="date">日期</span>
    </div>
  </header>
  
  <div class="note-content">
    <!-- 笔记内容 -->
  </div>
  
  <footer>
    <div class="export-info">
      导出时间：2024-01-01
    </div>
  </footer>
</article>
```

## 最佳实践

### 导出前准备

1. **检查内容**：
   - 确保所有内容已保存
   - 检查图片是否正常显示
   - 验证链接是否有效

2. **优化格式**：
   - 统一标题层级
   - 调整图片大小
   - 清理多余空行

3. **测试导出**：
   - 先导出一个小笔记测试
   - 检查导出结果
   - 调整选项后再批量导出

### 文件命名

建议的文件命名规则：

- **单个笔记**：`笔记标题_YYYYMMDD.格式`
- **批量导出**：`笔记备份_YYYYMMDD.zip`
- **文件夹导出**：`文件夹名_YYYYMMDD.zip`

### 存储建议

1. **本地备份**：
   - 定期导出到本地硬盘
   - 使用版本号管理
   - 保留多个历史版本

2. **云存储**：
   - 自动上传到云盘
   - 启用版本历史
   - 设置访问权限

3. **版本控制**：
   - Markdown 文件使用 Git
   - 提交消息包含导出日期
   - 定期推送到远程仓库

## 常见问题

### Q: 导出的 PDF 中文显示乱码？

A: 可能的原因：
- 缺少中文字体
- 尝试在导出选项中选择"嵌入字体"
- 或使用 HTML 导出后在浏览器中打印为 PDF

### Q: Markdown 导出后图片无法显示？

A: 检查：
- 图片 URL 是否公开可访问
- 是否启用了公开分享
- 尝试选择"下载图片到本地"选项

### Q: 导出文件太大怎么办？

A: 优化方法：
- 压缩图片质量
- 删除不必要的图片
- 拆分大笔记为多个小笔记
- 使用 Markdown 格式（最小）

### Q: 可以导出为 Word 格式吗？

A: 目前不直接支持，但可以：
- 导出为 HTML 后在 Word 中打开
- 导出为 Markdown 后使用 Pandoc 转换
- 导出为 PDF 后在 Word 中编辑

### Q: 批量导出失败怎么办？

A: 尝试：
- 减少一次导出的笔记数量
- 检查网络连接
- 清除浏览器缓存
- 分批次导出

## 快捷键

| 功能 | Windows/Linux | macOS |
|------|---------------|-------|
| 打开导出对话框 | `Ctrl + E` | `Cmd + E` |
| 导出为 Markdown | `Ctrl + Shift + M` | `Cmd + Shift + M` |
| 导出为 PDF | `Ctrl + Shift + P` | `Cmd + Shift + P` |
| 导出为 HTML | `Ctrl + Shift + H` | `Cmd + Shift + H` |

## 技术支持

如果遇到问题：
1. 检查浏览器版本（建议 Chrome 90+）
2. 尝试不同的导出选项
3. 查看浏览器控制台错误
4. 联系技术支持团队
